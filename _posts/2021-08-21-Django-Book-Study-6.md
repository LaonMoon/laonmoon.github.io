---
title: "[Django] 6. 장고 프로젝트 만들기(기초 웹사이트) : 06"
author: LaonMoon
date: 2021-08-21 20:50:00 +/-TTTT
categories: [Study, Django]
tags: [Django]
---

## 06 장고 프로젝트 만들기

### 06-1 웹 사이트 구조 구상하기
- 이 책에서는 블로그 겸 포트폴리오 사이트를 만듦.

#### 어떤 웹 사이트를 만들까?
만들게 될 웹 사이트는 크게 세 부분으로 구성되어 있다.

**[대문 페이지]**

랜딩`landing` 페이지라고도 함. 웹 사이트 처음 접속할 때 나타나는 일종의 대문 역할.

**[블로그 페이지]**

블로그`blog` 페이지는 기록하는 공간. 크게 두 가지 요소로 구성할 계획인데, 1) 블로그의 포스트를 목록 형태로 보여주는 '포스트 목록 `post list` 페이지'를 만들고, 포스트를 클릭했을 때 포스트 전체 내용과 댓글을 보여주는 '포스트 상세 `post detail` 페이지'를 만들 것이다.

**[자기소개 페이지]**

자기 소개 내용을 적을 것.

### 06-2 깃허브 저장소 만들기

**[1] 깃허브 저장소 만들기**

Repository를 새로 만든다. 

- Private 설정하기
- README 파일 만들어주기
- Add .gitignore을 Python으로 설정하기
    - .gitinore은 깃으로 버전 관리하지 않을 폴더, 파일을 설정하기 위한 용도이다. 이 항목을 Python으로 설정하면 파이썬 개발자들이 일반적으로 버전 관리를 하지 않아도 되는 목록이 적혀 있는 .gitignore 파일이 자동으로 생성된다. +[gitignore에 대한 내용](https://programming119.tistory.com/105)

**[2] 내 컴퓨터로 깃허브 저장소 클론하기**

위치하고 싶은 폴더에서 `git clone + 주소`를 해준다. 

### 06-3 파이참으로 실습 환경 설정하기

**[1] 프로젝트 폴더 지정하기**

파이참 실행 > File > Open > do_it_django_a_to_z 폴더 찾고 > OK

**[2] 가상환경 만들기**

File > Settings > Project: 프로젝트 폴더명 > Python Interpreter 클릭 > 설정 > add > **venv 폴더**가 만들어진다.

조금 기다렸다가 Package에 pip과 setuptools가 생성되면 성공이다. 그리고 나서 Apply 버튼을 클릭하고 OK를 클릭하자.


- 가상 환경을 사용하는 이유는?

한 컴퓨터 안에 웹 사이트 개발 프로젝트 말고 다른 프로젝트 A도 진행하고 있을 때, 웹 사이트 개발 프로젝트를 위해 설치한 외부 모듈이 파이썬 개발환경 전체에 영향을 주는 것을 가상 환경을 이용하면 방지할 수 있음.

**[3] .gitignore에 가상환경 폴더(venv) 추가하기**

venv 폴더는 깃으로 버전 관리를 하지 않는다. .gitignore로 확인할 수 있음. 상황마다 다를 수도 있지만 가상환경은 깃으로 버전 관리를 하지 않는 것이 현명하다. 

그리고 .idea 폴더(파이참에 의해 자동으로 생성된 폴더)는 버전 관리를 할 필요가 없다. 그래서 .gitignore 파일 맨 아랫줄에 다음을 추가해주자.

```
# Pycharm
.idea/
```

#### 가상 환경 실행하고 장고 설치하기

**[1] 가상 환경 실행하기**

터미널(cmd) 들어가서 프로젝트 폴더로 들어가 venv/Scripts/**activate.bat**을 입력. -> **가상 환경이 실행**됨. -> 가상 환경을 **빠져나오려면** -> **deactivate**를 입력.

**[2] 가상환경에 장고 설치하기**

항상 장고로 작업하기 전에 가상환경이 실행되고 있는지 꼭 확인하는 습관을 들여야 한다. **pip install django**라고 입력하여 장고를 설치하자.

현재 설치된 패키지를 확인하고 싶을 때는 `pip list`를 입력하면 된다.

### 06-4 장고로 기초 웹 사이트 만들기

#### 장고 프로젝트 생성하기

**[1] 장고 프로젝트 생성하기**

터미널에서 `django-admin startproject do_it_django_prj .`라고 입력한다. 여기서 끝 부분의 '.(dot)'의 의미는 '이 폴더에 장고 프로젝트를 만들자'는 의미이다.(+책에서는 cmder을 사용하고 있지만, 나는 cmd를 그대로 사용하고 있었기 때문에 Scripts 폴더에 해당 파일들이 만들어졌다. 삭제를 하고 진행하고 싶었는데 일단은 폴더를 옮겨서 똑같이 해보는 중이다. - 혹시 몰라 scripts 폴더 안의 do_it_django_prj와 manage.py를 삭제하였다.)

파일과 폴더를 확인할 때는 `ls` 명령어를 사용한다.

**[2] 서버 실행하기**

새 장고 프로젝트가 잘 생성되었는지 확인하기 위해 `python manage.py runserver`를 입력한다. 그러면 'You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.' 이런 오류메세지를 볼 수 있지만, 실행에는 문제가 없다.

http://127.0.0.1:8000/ 에 접속하면 장고 프로젝트로 생성된 웹 페이지를 볼 수 있다.

**[장고 프로젝트 폴더(do_it_django_prj)]**

파일이 여러 개 있는데, 그 중에서 `urls.py`와 `settings.py`를 많이 다룰 것이다.

- urls.py : 사용자가 어떤 URL 형식으로 접근했을 때 어떻게 웹 사이트를 작동시킬지를 정리해 놓은 파일
- settings.py : 장고 프로젝트의 설정을 담고 있는 파일

#### 데이터베이스에 관리자 계정 생성하기

**[마이그레이션 `migration`이란?]**

데이터베이스에 적용시켜야 하는 변화에 대한 기록.

e.g.) 댓글 기능이 없던 블로그에 댓글 작성 기능을 추가했다고 가정해보자. 그러면 데이터베이스에 댓글을 저장하기 위한 공간(테이블)이 필요하다. 이를 데이터베이스에 반영해야 서버를 실행했을 때 추가한 댓글 기능을 제대로 사용할 수 있다.

그런데 아직 아무 기능도 만들지 않았는데 'You have 18 unapplied migration(s).'와 같이 적용해야 할 마이그레이션이 왜 존재하는 걸까?

장고는 새 프로젝트를 생성할 때 데이터베이스에 기본적으로 필요한 테이블을 미리 마련해두기 때문이다.

**[1] 데이터베이스 생성하기**

원래는 `python manage.py migrations` 명령어로 먼저 마이그레이션을 만들어야 하지만 지금은 장고가 알아서 만든 마이그레이션이 있으므로 생략한다.

바로 `python manage.py migrate` 명령어를 입력한다. 현재는 아직 데이터베이스를 만들지 않았으므로 db.sqlite3라는 파일이 새로 생성되고, 그 안에 마이그레이션을 반영한 데이터베이스가 생성된다.

+) 그리고 나는 이걸 실습하려다가 가상환경을 실행하지도 않고 할 뻔했다. 잊지 말자. venv/Scripts/**activate.bat**로 가기!

- **SQLite3를 사용하는 이유는?**

SQLite3의 특징은 파일 하나로 관리하는 데이터베이스라는 점이다. 다른 데이터베이스들(오라클, MySQL, MongoDB, PostgreSQL 등)은 따로 복잡한 설치 과정을 거쳐야 한다. 백업을 하기 위해서는 데이터베이스에 대한 지식을 어느 정도 갖고 있어야 한다는 어려움도 있다. 이에 비해 SQLite는 파일 하나만 관리하면 된다. 

물론 **단점**도 있는데, 파일 기반의 데이터베이스기 때문에 읽고 쓰기가 빈번하게 일어나는 대형 프로젝트에서는 불리하다. (e.g. 수천, 수만 명의 사용자가 동시에 몰리는 웹 사이트)

**[2] 관리자 계정 생성하기**

웹사이트의 관리자 계정`super user`을 생성하자. 터미널에 `python manage.py createsuperuser`를 입력한다. 그리고 설정을 한 후에, 다시 `python manage.py runserver`로 서버를 실행한다.

그리고 **http://127.0.0.1:8000/admin/** 으로 접속한다. 그러면 관리자 페이지가 생성되어 있는 것을 확인할 수 있다.

**[3] 깃에서 데이터베이스를 버전 관리하지 않도록 등록하기**

.gitignore 파일을 열어 db.sqlite3이 포함되어 있는지 확인하기. #Django stuff에 넣으면 된다.(처음 설정할 때 Add .gitignore을 Python으로 설정했다면 이미 포함되어 있을 것이다.)

**왜 db.SQLite3은 깃으로 관리하면 안될까?**

웹 개발을 시작할 때는 당분간 로컬 컴퓨터에서만 여러 테스트를 진행할 것이다. 그 과정에서 게시물이나 댓글을 작성해 볼 것이다. 이 정보는 모두 데이터베이스 파일인 db.SQLite3에 저장된다. 

테스트가 끝나면 그때까지 만든 프로젝트 파일 전체를 깃허브를 통해 옮겨야 한다. 그런데 이 때 db.SQLite3까지 옮긴다면 테스트 과정에서 만든 정보가 모두 서버로 넘어가 버린다.

만약 이미 운영 중인 서버에 db.sqlite3가 있다면 어떨까? 서버에 있는 db.sqlite3에는 실제 방문자의 정보가 저장되어 있을 것이다. 거기에 로컬에서 온 db.sqlite3가 충돌을 일으킬 것이고, 제 기능을 하지 못해 오류가 발생할 것. 이런 상황을 피하기 위해 db.sqlite3은 깃으로 관리하지 않는다.

#### 커밋 - 장고 프로젝트 생성하기
```
git add .
git commit -m "커밋 메세지"
git push
```







